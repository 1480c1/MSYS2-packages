# Maintainer: Ladislav Laska <krakonos@krakonos.org>

pkgname="git-crypt"
pkgver=0.7.0
pkgrel=1
pkgdesc="Transparent file encryption in git"
arch=("i686" "x86_64")
url="https://www.agwa.name/projects/git-crypt/"
license=("spdx:GPL-3.0-or-later")
source=( "https://www.agwa.name/projects/git-crypt/downloads/${pkgname}-${pkgver}.tar.gz")
sha256sums=('50f100816a636a682404703b6c23a459e4d30248b2886a5cf571b0d52527c7d8')
makedepends=("openssl-devel" "make" "gcc")
depends=("gnupg" "git" "zlib" "openssl" "gcc-libs")

build () {
  cd "$pkgname-$pkgver"

  CPPFLAGS+=" -D_GNU_SOURCE"
  make
}
package () {
  cd "$pkgname-$pkgver"
  make PREFIX="/usr" DESTDIR="${pkgdir}" install
}
